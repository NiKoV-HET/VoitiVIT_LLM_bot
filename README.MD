# Войти в IT Bot

Этот проект – Telegram-бот, созданный для конференции **Войти в IT**. Бот помогает участникам конференции изучать применение больших языковых моделей (LLM) в учебе, работе и повседневной жизни, предоставляя интерактивное меню, динамический контент, мультимедийные материалы и возможность оставить отзыв.

## Функционал

- **Интерактивное меню:**
  - При команде `/start` пользователю показывается постоянная клавиатура с тремя кнопками: **Основное меню**, **О боте**, **Оставить обратную связь**.
  - Нажатие на кнопку **Основное меню** выводит inline‑клавиатуру с категориями, заданными в базе данных.
  - При выборе категории меню обновляется: показываются подкатегории с кнопкой **Назад** для возврата к списку категорий.
- **Динамическое наполнение контента:**
  - Категории и подтемы загружаются из базы данных (PostgreSQL), что позволяет изменять их без обновления кода бота.
  - При выборе подтемы бот отправляет подробное текстовое описание с мультимедийным контентом (GIF или видео), а также форматирует сообщение с использованием HTML‑тегов (например, для выделения текста жирным).
- **Обратная связь:**
  - Пользователь может оставить отзыв через команду `/feedback` или нажав соответствующую кнопку. Отзывы сохраняются в базе данных.
- **Автоматическая регистрация пользователей:**
  - При первом обращении к боту пользователь автоматически регистрируется в таблице `users`. Для регистрации используются данные из объекта `update.effective_user`.
- **Логирование и защита:**
  - Все действия пользователя (выбор категорий, подкатегорий, отправка отзывов) логируются.
  - Реализовано ограничение частоты запросов для защиты от перегрузок.
- **Обращения к LLM:**
  - У пользователей есть несколько обращений к LLM, версию LLM можно узнать в `/about`.

## Стек технологий

- **Python** с библиотекой [python-telegram-bot](https://github.com/python-telegram-bot/python-telegram-bot)
- **SQLAlchemy** (асинхронный режим)
- **PostgreSQL** – база данных
- **Alembic** – для миграций базы данных
- **Docker** и **Docker Compose** – для контейнеризации и удобного развертывания

## Структура проекта

```c#
project/ 
├── alembic/ # Миграции Alembic 
├── bot/ # Исходный код бота 
│ ├── config.py # Конфигурация (переменные окружения) 
│ ├── database.py # Настройка подключения к базе данных 
│ ├── models.py # Модели SQLAlchemy (пользователи, категории, подтемы, отзывы, логи) 
│ ├── keyboards.py # Функции для формирования клавиатур Telegram 
│ ├── handlers.py # Обработчики команд и сообщений 
│ └── main.py # Точка входа в приложение 
├── docker-compose.yml # Конфигурация Docker Compose 
├── Dockerfile # Конфигурация Docker основного приложения
├── .env # Файл переменных окружения 
├── .env_example # Пример файла переменных окружения 
├── requirements.txt # Зависимости Python 
└── README.md # Этот файл
```

## Переменные окружения

Создайте файл `.env` подобный `.env_example` в корне проекта и заполните переменные:

## Запуск проекта с Docker Compose

1) Сборка и запуск контейнеров:

Выполните в корне проекта:

```bash
docker-compose up --build
```

Это запустит:

- Контейнер для бота.
- Контейнер с PostgreSQL.

2) Применение миграций:

При первом старте бота необходимо запустить миграции вручную:

```bash
docker-compose exec bot bash
alembic upgrade head
```

## Использование

Запустите бота.  
Найдите вашего бота в Telegram и нажмите `/start`.

### Навигация по меню

После команды `/start` вы получите постоянную клавиатуру с кнопками Основное меню, О боте, Оставить обратную связь.
Нажмите Основное меню, чтобы увидеть список категорий.
Выберите нужную категорию, чтобы перейти к подкатегориям. Для возврата используйте кнопку Назад.

### Команды

`/start` – запуск бота и вывод меню.  
`/about` – информация о боте.  
`/feedback` – оставить отзыв.  

# TODO
## Обращение к LLM через API 

